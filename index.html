<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DOM Runner Game (Mobile Friendly)</title>
<style>
  body { margin:0; font-family:system-ui; background:#e6f3ff; overflow:hidden; }
  #game { position:relative; width:100%; height:100vh; overflow:hidden; }

  .char, .enemy, .obstacle {
    position:absolute;
    background-size:contain;
    background-repeat:no-repeat;
    background-position:center;
  }

  /* Character (replace image with your own) */
  #player {
    width:70px; height:90px;
    left:40px; bottom:20px;
    background-image:url('https://upload.wikimedia.org/wikipedia/commons/5/5e/Amitabh_Bachchan_2013.jpg');
    border-radius:10px;
  }

  #enemy {
    width:70px; height:90px;
    left:-90px; bottom:20px;
    background-image:url('https://upload.wikimedia.org/wikipedia/commons/2/25/Generic_person_image.png');
    border-radius:10px;
    filter:hue-rotate(150deg);
  }

  .obstacle {
    width:60px; height:60px;
    background:#444; border-radius:8px;
    bottom:20px;
  }

  #scoreBox {
    position:absolute; top:10px; left:10px;
    font-size:20px; font-weight:700;
    background:rgba(255,255,255,0.7);
    padding:6px 12px; border-radius:8px;
  }
</style>
</head>
<body>
<div id="game">
  <div id="player" class="char"></div>
  <div id="enemy" class="char"></div>
  <div id="scoreBox">Score: 0</div>
</div>

<script>
const game = document.getElementById('game');
const player = document.getElementById('player');
const enemy = document.getElementById('enemy');
const scoreBox = document.getElementById('scoreBox');

let score = 0;
let jumping = false;
let yVelocity = 0;
let gravity = -0.7;
let ground = 20;
let enemySpeed = 5;
let obstacleSpeed = 5;

// PLAYER JUMP
function jump(){
  if(!jumping){ jumping = true; yVelocity = 14; }
}

// MOBILE TAP
window.addEventListener('touchstart', jump);
// DESKTOP CLICK
window.addEventListener('mousedown', jump);
// SPACE KEY
window.addEventListener('keydown', e=>{ if(e.code==='Space') jump(); });

// ENEMY MOVEMENT
let enemyX = -120;
function enemyMove(){
  enemyX += enemySpeed;
  enemy.style.left = enemyX + 'px';
  if(enemyX > window.innerWidth){ enemyX = -120; score++; scoreBox.textContent = 'Score: '+score; }
}

// OBSTACLES
let obstacles = [];
function spawnObstacle(){
  const obs = document.createElement('div');
  obs.className='obstacle';
  obs.style.left = window.innerWidth + 'px';
  obs.style.bottom = '20px';
  game.appendChild(obs);
  obstacles.push(obs);
}
setInterval(spawnObstacle, 2000);

function moveObstacles(){
  for(let o of obstacles){
    let x = o.offsetLeft - obstacleSpeed;
    o.style.left = x + 'px';
    if(x < -100) o.remove();

    // collision
    if(checkCollision(player, o)) endGame();
    if(checkCollision(enemy, o)) enemySpeed = 2; else enemySpeed = 5;
  }
}

// GRAVITY LOOP
function updatePlayer(){
  if(jumping){
    const currentBottom = parseFloat(player.style.bottom);
    const newBottom = currentBottom + yVelocity;

    yVelocity += gravity;

    if(newBottom <= ground){
      player.style.bottom = ground + 'px';
      jumping = false;
      yVelocity = 0;
    } else {
      player.style.bottom = newBottom + 'px';
    }
  }
}

function checkCollision(a,b){
  const r1 = a.getBoundingClientRect();
  const r2 = b.getBoundingClientRect();
  return !(r1.right < r2.left || r1.left > r2.right || r1.bottom < r2.top || r1.top > r2.bottom);
}

let running = true;
function endGame(){ running = false; alert('Game Over! Score: '+score); location.reload(); }

function loop(){
  if(running){
    updatePlayer();
    enemyMove();
    moveObstacles();
    requestAnimationFrame(loop);
  }
}
loop();
</script>
</body>
</html>
