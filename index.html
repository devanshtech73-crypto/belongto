<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>ShrinkEarn SPA</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
    body {
      background:#f9fafb; color:#222;
      display:flex; flex-direction:column; min-height:100vh;
    }
    header {
      position:fixed; top:0; left:0; right:0;
      background:linear-gradient(90deg,#00c853,#00e5ff);
      box-shadow:0 2px 10px rgba(0,0,0,0.1);
      z-index:1000; transition:all 0.3s ease;
    }
    .nav-container {
      max-width:1100px; margin:auto; display:flex; align-items:center;
      justify-content:space-between; padding:0.8rem 1rem;
    }
    .logo {
      font-weight:700; font-size:1.3rem; color:#fff; letter-spacing:1px;
    }
    nav ul {
      list-style:none; display:flex; gap:1rem;
    }
    nav a {
      color:#fff; text-decoration:none; font-weight:500; transition:0.2s;
    }
    nav a:hover {opacity:0.8;}
    .hamburger {display:none; flex-direction:column; cursor:pointer;}
    .hamburger span {
      height:3px; width:25px; background:#fff; margin:4px 0; border-radius:3px;
    }

    main {
      flex:1; margin-top:70px; padding:1rem; max-width:1100px; width:100%; margin-inline:auto;
      animation:fadeIn 0.4s ease;
    }
    @keyframes fadeIn {from{opacity:0;}to{opacity:1;}}

    .card {
      background:#fff; padding:1rem; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.08);
      margin-bottom:1rem; transition:transform 0.2s;
    }
    .card:hover {transform:translateY(-3px);}
    button {
      background:linear-gradient(90deg,#00c853,#00e5ff);
      color:#fff; border:none; border-radius:8px; padding:0.6rem 1rem;
      font-size:0.95rem; cursor:pointer; transition:0.3s;
    }
    button:hover {opacity:0.85;}
    button:disabled {opacity:0.5;cursor:not-allowed;}

    footer {
      text-align:center; padding:1rem; background:#fff; color:#777;
      border-top:1px solid #eee;
    }

    /* mobile nav */
    @media(max-width:768px){
      nav ul {display:none;flex-direction:column;position:absolute;top:60px;right:10px;
        background:linear-gradient(90deg,#00c853,#00e5ff);padding:1rem;border-radius:10px;}
      nav ul.active{display:flex;}
      .hamburger{display:flex;}
      main{padding:0.8rem;}
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-container">
      <div class="logo">ShrinkEarn</div>
      <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
      <nav>
        <ul id="nav-links">
          <li><a href="#home">Home</a></li>
          <li><a href="#tasks">Tasks</a></li>
          <li><a href="#redeem">Redeem</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#privacy">Privacy</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="app"></main>

  <footer>Â© 2025 ShrinkEarn. All rights reserved.</footer>

  <script>
    const app = document.getElementById('app');
    const tasks = [
      {id:1, link:'https://shrinkme.click/2xAJt2S', title:'Visit ShrinkMe Offer #1', points:10},
      {id:2, link:'https://shrinkme.click/2xAJt2S', title:'Visit ShrinkMe Offer #2', points:10},
      {id:3, link:'https://shrinkme.click/2xAJt2S', title:'Visit ShrinkMe Offer #3', points:10},
    ];
    let points = parseInt(localStorage.getItem('points')||'0');
    let completed = JSON.parse(localStorage.getItem('completed')||'[]');
    let pending = JSON.parse(localStorage.getItem('pending')||'{}');

    function save(){localStorage.setItem('points',points);localStorage.setItem('completed',JSON.stringify(completed));localStorage.setItem('pending',JSON.stringify(pending));}

    function renderHome(){
      app.innerHTML=`
      <div class="card">
        <h2>Welcome to ShrinkEarn</h2>
        <p>Complete simple ShrinkMe tasks, earn points, and redeem rewards. Current Points: <b>${points}</b></p>
        <p>Start by visiting the <b>Tasks</b> page!</p>
      </div>`;
    }

    function renderTasks(){
      app.innerHTML = '<h2>Your Tasks</h2>';
      tasks.forEach(task=>{
        const done = completed.includes(task.id);
        const isPending = pending[task.id];
        const card=document.createElement('div');
        card.className='card';
        card.innerHTML=`
          <h3>${task.title}</h3>
          <p>Reward: ${task.points} points</p>
          <button id="open-${task.id}" ${done?'disabled':''}>${done?'Completed':'Open'}</button>
          <button id="complete-${task.id}" ${!isPending?'disabled':''}>Mark Completed</button>
          <p id="timer-${task.id}" style="margin-top:5px;color:#555;"></p>
        `;
        app.appendChild(card);

        document.getElementById(`open-${task.id}`).onclick=()=>{
          pending[task.id]={start:Date.now()};
          save();
          window.open(task.link,'_blank');
        };
        document.getElementById(`complete-${task.id}`).onclick=()=>{
          if(!completed.includes(task.id)){
            completed.push(task.id);
            points+=task.points;
            delete pending[task.id];
            save();
            renderTasks();
          }
        };
      });
    }

    function renderRedeem(){
      app.innerHTML=`
      <div class="card">
        <h2>Redeem Points</h2>
        <p>You have <b>${points}</b> points.</p>
        <p>Minimum 100 points required to redeem.</p>
        <button ${points<100?'disabled':''}>Redeem Now</button>
      </div>`;
    }

    function renderAbout(){
      app.innerHTML=`
      <div class="card">
        <h2>About Us</h2>
        <p>ShrinkEarn is a simple earn system using ShrinkMe links. Complete tasks, earn rewards!</p>
      </div>`;
    }

    function renderPrivacy(){
      app.innerHTML=`
      <div class="card">
        <h2>Privacy Policy</h2>
        <p>We do not collect personal data. Points are stored locally in your browser.</p>
      </div>`;
    }

    function router(){
      const hash=location.hash||'#home';
      if(hash==='#home')renderHome();
      else if(hash==='#tasks')renderTasks();
      else if(hash==='#redeem')renderRedeem();
      else if(hash==='#about')renderAbout();
      else if(hash==='#privacy')renderPrivacy();
    }

    window.addEventListener('hashchange',router);
    window.addEventListener('load',router);

    // visibility-based timer checker
    document.addEventListener('visibilitychange',()=>{
      if(!document.hidden){
        const now=Date.now();
        Object.keys(pending).forEach(id=>{
          const start=pending[id].start;
          const diff=(now-start)/1000;
          const tEl=document.getElementById(`timer-${id}`);
          if(diff>=10){
            const btn=document.getElementById(`complete-${id}`);
            if(btn)btn.disabled=false;
            if(tEl)tEl.innerText='Ready to complete!';
          }else{
            const remain=(10-diff).toFixed(1);
            if(tEl)tEl.innerText=`Wait ${remain}s...`;
            setTimeout(()=>router(),1000);
          }
        });
      }
    });

    // Mobile hamburger
    const burger=document.getElementById('hamburger');
    const navLinks=document.getElementById('nav-links');
    burger.addEventListener('click',()=>{navLinks.classList.toggle('active');});
  </script>
</body>
</html>
