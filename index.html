<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>ShrinkEarn — Trusted Rewards</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <meta name="color-scheme" content="light dark">
  <style>
    /* Reset & base */
    :root{--bg:#f7fbf7;--card:#ffffff;--accent1:#00c853;--accent2:#00e5ff;--muted:#6b7280;--radius:14px;--maxw:1100px}
    *{box-sizing:border-box}
    html,body{height:100%;width:100%;overflow-x:hidden;margin:0;padding:0;font-family:'Poppins',system-ui,Arial;background:linear-gradient(180deg,var(--bg),#f0fdf4);color:#0b1220;-webkit-text-size-adjust:100%}
    a{color:inherit}
    /* Header / Nav */
    header{position:fixed;inset:0 0 auto 0;height:72px;background:linear-gradient(90deg,var(--accent1),var(--accent2));display:flex;align-items:center;z-index:1200;box-shadow:0 6px 30px rgba(2,6,23,0.08)}
    .nav-inner{max-width:var(--maxw);margin:0 auto;width:100%;padding:12px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),#00a86b);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:18px;box-shadow:0 8px 24px rgba(6,182,78,0.18)}
    .title{color:#fff;font-weight:700;letter-spacing:0.2px}
    nav{display:flex;align-items:center;gap:10px}
    nav a{color:#fff;text-decoration:none;padding:8px 10px;border-radius:10px;font-weight:600;transition:background .18s,opacity .18s}
    nav a:hover{opacity:.92}
    nav a.active{background:rgba(255,255,255,0.12)}
    .verified-badge{background:#fff;color:var(--accent1);padding:6px 8px;border-radius:8px;font-weight:700;margin-left:8px;font-size:13px}

    /* Mobile hamburger */
    .hamburger{display:none;width:38px;height:38px;border-radius:10px;align-items:center;justify-content:center;cursor:pointer}
    .hamburger div{width:22px;height:2px;background:#fff;border-radius:2px;margin:3px 0}

    /* Layout */
    main{max-width:var(--maxw);margin:92px auto 28px;padding:18px;width:100%}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}
    @media(max-width:720px){.nav-inner{padding:10px}; .hamburger{display:flex}; nav ul{display:none;position:absolute;top:72px;right:12px;background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:12px;border-radius:10px;box-shadow:0 8px 30px rgba(2,6,23,0.12)} nav ul.active{display:flex;flex-direction:column;gap:8px}}
    .card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 8px 30px rgba(2,6,23,0.05)}
    h1,h2,h3{margin:0 0 8px 0}
    p{margin:0 0 10px 0;color:var(--muted);line-height:1.5}

    /* Buttons */
    .btn{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn:disabled{opacity:.45;cursor:not-allowed}

    /* Tasks list */
    .tasks-list{display:flex;flex-direction:column;gap:12px}
    .task{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfffc);border:1px solid rgba(6,182,78,0.06);gap:12px;flex-wrap:wrap}
    .task .left{min-width:180px;flex:1}
    .muted{color:var(--muted)}
    .timer{font-weight:700;color:#0b1220}

    /* feedback carousel */
    .feedback{display:flex;gap:12px;overflow:auto;padding-bottom:6px}
    .feedback .item{min-width:180px;background:#fff;padding:12px;border-radius:10px;box-shadow:0 6px 20px rgba(2,6,23,0.04)}
    .stars{color:#ffc107;font-weight:800}

    /* footer */
    footer{max-width:var(--maxw);margin:0 auto;padding:18px;text-align:center;color:var(--muted)}

    /* utility */
    .small{font-size:13px}
  </style>
</head>
<body>
  <header>
    <div class="nav-inner">
      <div class="brand">
        <div class="logo">SE</div>
        <div>
          <div class="title">ShrinkEarn</div>
          <div class="small" style="color:rgba(255,255,255,0.95)">Trusted rewards • Fast payouts</div>
        </div>
        <span class="verified-badge">Verified</span>
      </div>

      <div style="display:flex;align-items:center;gap:12px">
        <nav>
          <ul id="nav-links" style="display:flex;gap:8px;align-items:center">
            <li><a href="#home" data-route>Home</a></li>
            <li><a href="#tasks" data-route>Tasks</a></li>
            <li><a href="#redeem" data-route>Redeem</a></li>
            <li><a href="#about" data-route>About</a></li>
            <li><a href="#privacy" data-route>Privacy</a></li>
          </ul>
        </nav>
        <div class="hamburger" id="hamburger" aria-label="menu" title="menu"><div></div><div></div><div></div></div>
      </div>
    </div>
  </header>

  <main id="view">
    <!-- SPA content rendered here -->
  </main>

  <footer>
    © 2025 ShrinkEarn — Secure payments and verified redemptions. All stored locally unless you request payout.
  </footer>

<script>
/* ------------------------- Configuration ------------------------- */
const SHRINK_LINK = 'https://shrinkme.click/2xAJt2S';
const POPUNDER_URL = 'https://www.effectivegatecpm.com/mc9c9nw9?key=122cc1bc5317a8a708ca5708e6e02dc5';
const VERIFY_SECONDS = 10;
const TASK_COUNT = 6;
/* ------------------------- Storage keys ------------------------- */
const LS_POINTS = 'se_points_v3';
const LS_DONE = 'se_done_v3';
const LS_PENDING = 'se_pending_v3';
const LS_REDEEM = 'se_redeem_v3';

/* ------------------------- App state ------------------------- */
const TASKS = Array.from({length:TASK_COUNT}, (_,i)=>({
  id: 't'+(i+1),
  title: `Visit Offer #${i+1}`,
  desc: 'Open the shortened link and return. Stay time is verified before claiming.',
  url: SHRINK_LINK,
  points: 10
}));

function getPoints(){return Number(localStorage.getItem(LS_POINTS) || 0)}
function setPoints(v){localStorage.setItem(LS_POINTS, String(v)); updateHeaderPoints();}
function getDone(){return JSON.parse(localStorage.getItem(LS_DONE) || '{}')}
function setDone(o){localStorage.setItem(LS_DONE, JSON.stringify(o))}
function getPending(){return JSON.parse(localStorage.getItem(LS_PENDING) || '{}')}
function setPending(o){localStorage.setItem(LS_PENDING, JSON.stringify(o))}
function getRedeems(){return JSON.parse(localStorage.getItem(LS_REDEEM) || '[]')}
function setRedeems(v){localStorage.setItem(LS_REDEEM, JSON.stringify(v))}

/* header points */
function updateHeaderPoints(){
  // show points next to brand (update small element)
  const el = document.querySelector('.title');
  // also show a small overlay inside header (we'll show as title subtitle)
  const small = document.querySelector('.brand .small');
  if(small) small.textContent = `Balance: ${getPoints()} pts • Trusted payouts`;
}

/* ------------------------- Router & UI ------------------------- */
const view = document.getElementById('view');
function setActiveNav(){
  const hash = location.hash || '#home';
  document.querySelectorAll('[data-route]').forEach(a=>{
    a.classList.toggle('active', a.getAttribute('href') === hash);
  });
}
function router(){
  setActiveNav();
  const hash = location.hash || '#home';
  if(hash === '#home') return renderHome();
  if(hash === '#tasks') return renderTasks();
  if(hash === '#redeem') return renderRedeem();
  if(hash === '#about') return renderAbout();
  if(hash === '#privacy') return renderPrivacy();
  renderHome();
}

/* ------------------------- Popunder logic (once per session) ------------------------- */
function openPopunderOnce(){
  try {
    if(sessionStorage.getItem('pop_opened')) return;
    // Open ad in new window and then focus back to main window to emulate popunder
    const adWin = window.open(POPUNDER_URL, '_blank', 'noopener,noreferrer');
    // Some browsers block immediate focus shifts; try to blur the ad then focus main
    setTimeout(()=>{ try{ window.focus(); }catch(e){} }, 300);
    sessionStorage.setItem('pop_opened', '1');
  } catch(e){ /* ignore */ }
}

/* ------------------------- Timer & Verification ------------------------- */
let activeCountdowns = {};
function formatTimerTextForPending(pendTs){
  const now = Date.now();
  const elapsed = Math.floor((now - pendTs)/1000);
  if(elapsed >= VERIFY_SECONDS) return 'Ready to complete';
  const remain = VERIFY_SECONDS - elapsed;
  return `Returned — waiting ${remain}s`;
}

function onUserReturn(){
  const pending = getPending();
  Object.keys(pending).forEach(id=>{
    if(activeCountdowns[id]) return;
    const pendTs = pending[id];
    if(!pendTs) return;
    const now = Date.now();
    const elapsed = Math.floor((now - pendTs)/1000);
    const timerEl = document.getElementById('timer-'+id);
    const completeBtn = document.getElementById('complete-'+id);
    if(!timerEl || !completeBtn) return;
    if(elapsed >= VERIFY_SECONDS){
      timerEl.textContent = 'Ready to complete';
      completeBtn.disabled = false;
      // clear pending to avoid re-check
      const p = getPending(); delete p[id]; setPending(p);
      return;
    }
    let remain = VERIFY_SECONDS - elapsed;
    timerEl.textContent = `Waiting ${remain}s`;
    activeCountdowns[id] = setInterval(()=>{
      remain--;
      if(remain <= 0){
        clearInterval(activeCountdowns[id]);
        delete activeCountdowns[id];
        timerEl.textContent = 'Ready to complete';
        completeBtn.disabled = false;
        const p = getPending(); delete p[id]; setPending(p);
      } else {
        timerEl.textContent = `Waiting ${remain}s`;
      }
    }, 1000);
  });
}

/* detect return from other tab */
document.addEventListener('visibilitychange', ()=>{ if(document.visibilityState === 'visible') onUserReturn(); });
window.addEventListener('focus', onUserReturn);

/* ------------------------- Page renderers ------------------------- */

/* Each page contains 3 paragraphs (~100-180 words total) written to sound professional */
function renderHome(){
  view.innerHTML = `
    <div class="grid">
      <div>
        <div class="card">
          <h1>Welcome to ShrinkEarn</h1>
          <p>ShrinkEarn is designed for users who want a straightforward and transparent way to earn rewards for performing simple verified actions. Our workflow prioritizes fairness and clarity: tasks are visible, rewards are displayed clearly, and the verification mechanism ensures that only legitimate interactions result in payouts. We operate with clear terms and processes so users understand how earnings are tracked and how redemptions are processed.</p>
          <p>We invest in protecting the integrity of the platform and answering user questions promptly. The platform keeps a precise record of completed tasks and redemption requests within the user’s browser, and it displays clear status updates so every user can see the history of their activity and withdrawals. This approach keeps operations simple while maintaining a trustworthy experience for everyone who participates.</p>
          <p>Users can view recent feedback, check redemption status, and read our privacy overview directly from the site. The design focuses on clarity and usability so that both new and experienced users can quickly begin earning and reliably request payouts when they reach the threshold.</p>
        </div>

        <div class="card" style="margin-top:12px">
          <h2>Recent Feedback</h2>
          <div class="feedback">
            <div class="item"><b>Rohit</b><div class="stars">★★★★★</div><p class="small">Fast payout and a simple experience — recommended.</p></div>
            <div class="item"><b>Ananya</b><div class="stars">★★★★☆</div><p class="small">Clear steps and prompt support for my redemption.</p></div>
            <div class="item"><b>Vikram</b><div class="stars">★★★★★</div><p class="small">I used the UPI option and it arrived quickly.</p></div>
            <div class="item"><b>Neha</b><div class="stars">★★★★★</div><p class="small">Solid platform for simple tasks and payouts.</p></div>
          </div>
        </div>
      </div>

      <aside>
        <div class="card">
          <h3>Your Balance</h3>
          <div style="font-size:20px;font-weight:800">${getPoints()} pts</div>
          <p class="small">Earn more by visiting Tasks. Redemptions are processed promptly after verification.</p>
        </div>
      </aside>
    </div>
  `;
  updateHeaderPoints();
}

function renderTasks(){
  const done = getDone();
  const pending = getPending();
  let html = `<div class="card"><h2>Available Tasks</h2><p>Complete tasks to earn points. Each task requires following the link, staying on the offer page for the verification period, and returning here to claim your reward. The verification ensures that offers are legitimately viewed to maintain payer confidence and allow payouts to genuine users.</p><p>To begin, click 'Open' on any task. The system will record your open time and after you return it will verify the time spent. If you returned after the required duration, the action will be eligible to claim immediately. If not, a short countdown will run to the remaining seconds.</p><p>We limit repeated rapid claims and take steps to ensure quality traffic; please follow the task instructions exactly to guarantee your earnings are accepted and processed.</p><div class="tasks-list">`;

  TASKS.forEach(t=>{
    const isDone = !!done[t.id];
    const timerText = pending[t.id] ? formatTimerTextForPending(pending[t.id]) : '';
    html += `
      <div class="task" id="task-${t.id}">
        <div class="left">
          <h3>${t.title}</h3>
          <p class="muted">${t.desc} • <strong>${t.points} pts</strong></p>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px">
          <div style="display:flex;gap:8px">
            <button class="btn" ${isDone ? 'disabled' : ''} data-open="${t.id}">Open</button>
            <button class="btn" id="complete-${t.id}" ${isDone ? 'disabled' : 'disabled'}>Mark as Completed</button>
          </div>
          <div class="muted timer" id="timer-${t.id}">${timerText}</div>
        </div>
      </div>
    `;
  });

  html += `</div></div>`;
  view.innerHTML = html;
  // attach events
  document.querySelectorAll('[data-open]').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const id = e.currentTarget.getAttribute('data-open');
      // record pending timestamp only on user's click
      const p = getPending(); p[id] = Date.now(); setPending(p);
      // open Shrink link in new tab
      window.open(TASKS.find(x=>x.id===id).url, '_blank');
      // open popunder once per session
      openPopunderOnce();
      // ensure tasks page shows updated timer
      setTimeout(()=>{ // small timeout to allow UI update
        const tEl = document.getElementById('timer-'+id);
        if(tEl) tEl.textContent = 'Opened — return to verify';
      }, 200);
    });
  });

  // complete buttons: enable/disable based on pending/time (checked on visibilitychange)
  TASKS.forEach(t=>{
    const cbtn = document.getElementById('complete-'+t.id);
    if(cbtn){
      cbtn.addEventListener('click', ()=>{
        const pendingObj = getPending();
        const pendTs = pendingObj[t.id];
        if(!pendTs){
          alert('Please open the task link first before claiming the reward.');
          return;
        }
        const elapsed = Math.floor((Date.now() - pendTs)/1000);
        if(elapsed < VERIFY_SECONDS){
          alert(`Please return and wait ${VERIFY_SECONDS - elapsed} more seconds before claiming.`);
          return;
        }
        // award points
        const done = getDone(); done[t.id] = true; setDone(done);
        setPoints(getPoints() + t.points);
        // remove pending
        const p = getPending(); delete p[t.id]; setPending(p);
        // refresh tasks view
        renderTasks();
        alert(`Success — you earned ${t.points} pts`);
      });
    }
  });
}

function renderRedeem(){
  const redeems = getRedeems();
  const listHtml = redeems.length ? redeems.map(r=>`<li>${r.date} — ${r.method} — ${r.amount}</li>`).join('') : '<li>No redemptions yet</li>';
  view.innerHTML = `
    <div class="card">
      <h2>Redeem Points</h2>
      <p>When you reach the redemption threshold you may request a payout. Choose from the available methods and follow the verification steps. Our system shows a clear status for each request and keeps a visible history for your records.</p>
      <p>Requests are processed after verification and usually complete within the stated processing window. When you submit a request you will be asked to confirm using a short verification code. This helps keep payouts secure and ensures funds are processed to the right account.</p>
      <p>Minimum redemption amount is 100 points. Enter the payout method and confirm to request processing.</p>
      <div style="margin-top:12px">
        <div class="small">Current balance: <strong>${getPoints()} pts</strong></div>
        <div style="margin-top:10px">
          <label for="method">Method</label><br>
          <select id="method" style="padding:8px;border-radius:8px;margin-top:6px">
            <option>Paytm</option>
            <option>UPI</option>
            <option>Gift Card</option>
          </select>
          <div style="height:12px"></div>
          <button id="requestRedeem" class="btn" ${getPoints() < 100 ? 'disabled' : ''}>Request Redeem</button>
        </div>
      </div>
    </div>

    <div class="card">
      <h3>Redemption History</h3>
      <ul>
        ${listHtml}
      </ul>
    </div>
  `;

  document.getElementById('requestRedeem')?.addEventListener('click', ()=> {
    // show OTP modal-like flow inside page
    const method = document.getElementById('method').value;
    showOtpFlow(method);
  });
}

function showOtpFlow(method){
  view.innerHTML = `
    <div class="card">
      <h2>Verification</h2>
      <p>To confirm the redemption request for 100 points, enter the 4-digit verification code shown. For security, each request requires confirmation to proceed.</p>
      <p class="small">Method: <strong>${method}</strong></p>
      <div style="margin-top:8px;">
        <input id="otpInput" maxlength="4" placeholder="Enter 4-digit code" style="padding:10px;border-radius:8px;border:1px solid #e6e6e6;font-size:16px">
        <div style="height:12px"></div>
        <button id="confirmOtp" class="btn">Confirm</button>
      </div>
    </div>
  `;
  document.getElementById('confirmOtp').addEventListener('click', ()=>{
    const code = document.getElementById('otpInput').value.trim();
    if(code.length !== 4){ alert('Enter a 4-digit code'); return; }
    // process redemption
    const redeems = getRedeems();
    const now = new Date().toLocaleString();
    redeems.unshift({method,amount:'₹100',date:now});
    setRedeems(redeems);
    setPoints(Math.max(0, getPoints() - 100));
    // show confirmation
    view.innerHTML = `
      <div class="card">
        <h2>Request Submitted</h2>
        <p>Your redemption request for ₹100 via ${method} was submitted on ${now}. The request is queued and will be processed as per platform policies. You can check the redemption history to view the request status.</p>
        <div style="height:12px"></div>
        <button id="backHome" class="btn">Back to Home</button>
      </div>
    `;
    document.getElementById('backHome').addEventListener('click', ()=>{ location.hash = '#home'; router(); });
  });
}

function renderAbout(){
  view.innerHTML = `
    <div class="card">
      <h2>About ShrinkEarn</h2>
      <p>ShrinkEarn connects users with straightforward tasks that pay fair rewards for verified interactions. The platform is built to present offers clearly, ensure verification of views, and enable users to redeem earnings reliably. We focus on transparency: every task lists its reward, and every action taken by the user is recorded in a way that is visible to them so they can track progress and redemptions.</p>
      <p>Maintaining high standards ensures advertisers receive quality interactions, which keeps payouts sustainable. Because of this, our verification uses a brief stay period and visible confirmation, reducing abuse and protecting both advertisers and users. The system design prioritizes user clarity and swift processing.</p>
      <p>We provide multiple redeem options and keep a local record so users can verify their redemptions. Our interface emphasizes readability and trust, presenting status updates and feedback so users know what to expect at every stage.</p>
    </div>
  `;
}

function renderPrivacy(){
  view.innerHTML = `
    <div class="card">
      <h2>Privacy & Policy</h2>
      <p>Your privacy is important. This platform stores minimal transactional state locally in your browser: points balance, completed tasks, pending verifications, and redemption history. No personal contact information is stored by default. When a user requests a payout, only the minimal data entered for the payout is stored to complete that request (within the local redemption record).</p>
      <p>We do not transmit personal data unless you provide it explicitly as part of a redemption request. The design keeps most data client-side, giving users direct visibility and control. If you decide to export or share redemption details for support, you choose what to reveal.</p>
      <p>For any questions about data handling, feel free to contact the platform administrator. We are committed to handling user requests and respecting user privacy in accordance with fair-use principles.</p>
    </div>
  `;
}

/* ------------------------- Router init ------------------------- */
function router(){ setActiveNav(); const hash = location.hash || '#home'; if(hash === '#home') renderHome(); else if(hash === '#tasks') renderTasks(); else if(hash === '#redeem') renderRedeem(); else if(hash === '#about') renderAbout(); else if(hash === '#privacy') renderPrivacy(); else renderHome(); }
window.addEventListener('hashchange', router);

/* ------------------------- Mobile menu ------------------------- */
document.getElementById('hamburger').addEventListener('click', ()=>{
  const ul = document.getElementById('nav-links');
  if(ul.classList.contains('active')) ul.classList.remove('active'); else ul.classList.add('active');
});

/* ------------------------- Init ------------------------- */
(function init(){
  // ensure storage defaults
  if(!localStorage.getItem(LS_POINTS)) localStorage.setItem(LS_POINTS, '0');
  if(!localStorage.getItem(LS_DONE)) localStorage.setItem(LS_DONE, '{}');
  if(!localStorage.getItem(LS_PENDING)) localStorage.setItem(LS_PENDING, '{}');
  if(!localStorage.getItem(LS_REDEEM)) localStorage.setItem(LS_REDEEM, '[]');
  updateHeaderPoints();
  // initial route
  if(!location.hash) location.hash = '#home';
  router();
})();

</script>
</body>
</html>
