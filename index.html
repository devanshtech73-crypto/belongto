<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Top Down Car Game</title>
<style>
    body { margin:0; overflow:hidden; background:#111; font-family:system-ui; }
    #game {
        position:relative;
        width:100vw;
        height:100vh;
        background:#444 url('https://i.imgur.com/qqwS8bL.png');
        background-size:cover;
        overflow:hidden;
    }
    .road {
        position:absolute; left:50%; top:0; transform:translateX(-50%);
        width:320px; height:100%;
        background:#2f2f2f;
        box-shadow:0 0 40px rgba(0,0,0,0.6) inset;
    }
    .lane-line { position:absolute; width:8px; height:60px; background:#fff; left:50%; transform:translateX(-50%); }

    .car, .traffic {
        position:absolute;
        width:60px; height:120px;
        background-size:cover;
        transform-origin:center;
        filter:drop-shadow(0 10px 12px rgba(0,0,0,0.45));
    }
    #player { background-image:url('https://i.imgur.com/1m0t2Tx.png'); }

    #wheel {
        position:absolute; bottom:20px; right:20px;
        width:140px; height:140px;
        background:url('https://i.imgur.com/WP4JrJd.png') no-repeat center/contain;
        touch-action:none;
    }
</style>
</head>
<body>
<div id="game">
    <div class="road" id="road"></div>
    <div id="player" class="car"></div>
    <canvas id="wheel" width="160" height="160" style="position:absolute; bottom:20px; right:20px; touch-action:none;"></canvas>
</div>
<script>
const player = document.getElementById('player');
let px = window.innerWidth/2 - 30;
let py = window.innerHeight - 180;
let speed = 7;
let steer = 0;
let steeringAngle = 0;

function update(){
    steeringAngle *= 0.9;
    px += steeringAngle;
    if(px < window.innerWidth/2 - 140) px = window.innerWidth/2 - 140;
    if(px > window.innerWidth/2 + 80) px = window.innerWidth/2 + 80;
    player.style.left = px + 'px';
    player.style.top = py + 'px';
    player.style.transform = `rotate(${steeringAngle*0.6}deg)`;
    requestAnimationFrame(update);
}
update();

let wheel = document.getElementById('wheel');
let wctx = wheel.getContext('2d');
function drawWheel(angle=0){
    wctx.clearRect(0,0,160,160);
    wctx.save();
    wctx.translate(80,80);
    wctx.rotate(angle);
    wctx.lineWidth = 14;
    wctx.strokeStyle = '#222';
    wctx.beginPath();
    wctx.arc(0,0,60,0,Math.PI*2);
    wctx.stroke();
    wctx.lineWidth = 8;
    wctx.strokeStyle = '#ffcc00';
    wctx.beginPath();
    wctx.moveTo(0,-60);
    wctx.lineTo(0,-30);
    wctx.stroke();
    wctx.restore();
}
let wheelAngle=0;
drawWheel();
let dragging = false;

wheel.addEventListener('touchstart',()=>dragging=true);
wheel.addEventListener('touchend',()=>{ dragging=false; steeringAngle=0; });
wheel.addEventListener('touchmove',(e)=>{
    if(!dragging) return;
    let t = e.touches[0];
    let rect = wheel.getBoundingClientRect();
    let dx = t.clientX - (rect.left + rect.width/2);
    steeringAngle = dx * 0.2;
wheelAngle = steeringAngle * 0.05;
drawWheel(wheelAngle);
});

// basic traffic
const game = document.getElementById('game');
setInterval(()=>{
    let t = document.createElement('div');
    t.className='traffic';
    t.style.backgroundImage="url('https://i.imgur.com/LqQDPHb.png')";
    t.style.left=(window.innerWidth/2 - 100 + Math.random()*200)+'px';
    t.style.top='-150px';
    game.appendChild(t);
    let y=-150;
    let fall = setInterval(()=>{
        y+=6;
        t.style.top=y+'px';
        if(y>window.innerHeight+150){ t.remove(); clearInterval(fall);}    
    },16);
},1200);

</script>
</body>
</html>
